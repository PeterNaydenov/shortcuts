import t from"@peter.naydenov/notice";var e={_normalizeWithPlugins:function(t,e){return function(t){const n=e.shortcuts;Object.keys(n).forEach(e=>{Object.entries(n[e]).forEach(([i,o])=>{const r=t(i);r!==i&&(delete n[e][i],n[e][r]=o)})})}},_readShortcutWithPlugins:function(t,e){return function(n){const{inAPI:i}=t,o=n.split(":")[0].toLowerCase().trim(),r=i._systemAction(o,"none");let s=n;return-1!==r&&(s=e.plugins[r].shortcutName(n)),s}},_setupPlugin:function(t,e){const{inAPI:n}=t,{currentContext:i,shortcuts:o,exposeShortcut:r,ERROR_EVENT_NAME:s}=e;return function(e){const{prefix:l,_normalizeShortcutName:c,_registerShortcutEvents:u,_listenDOM:a,pluginState:d,deps:p}=e,{resetState:f}=p;d.currentContext=i,d.shortcuts=o,d.exposeShortcut=r,d.ERROR_EVENT_NAME=s;const h={ev:t.ev,extra:t.extra,...p};n._normalizeWithPlugins(c);let m=u(h,d),g=a(h,d);m>0&&g.start();let v={getPrefix:()=>l,shortcutName:t=>c(t),contextChange:()=>{f(),m=u(h,d),m<1&&g.stop(),m>0&&g.start()},mute:()=>g.stop(),unmute:()=>g.start(),destroy:()=>{g.stop(),f()}};return Object.freeze(v),v}},_systemAction:function(t,e){return function(t,n,i=null){return e.plugins.findIndex(e=>e.getPrefix()===t&&(e[n]&&e[n](i),!0))}},changeContext:function(t,e){const{shortcuts:n,currentContext:i,ERROR_EVENT_NAME:o}=e,{ev:r}=t;return function(t=!1){const s=i.name;if(!t)return r.reset(),void(i.name=null);s!==t&&(n[t]?(n[s]&&r.reset(),i.name=t,e.plugins.forEach(e=>e.contextChange(t)),Object.entries(n[t]).forEach(([t,e])=>{t.includes(":SETUP")||e.forEach(e=>r.on(t,e))}),r.on("*",(...t)=>{e.exposeShortcut&&e.exposeShortcut(...t)})):r.emit(o,`Context '${t}' does not exist`))}},listShortcuts:function(t,e){const n=e.shortcuts;return function(t=null){if(null!=t){let e=n[t];return null==e?null:Object.entries(e).map(([t,e])=>t)}return Object.keys(n).map(t=>{let e={};return e.context=t,e.shortcuts=Object.entries(n[t]).map(([t,e])=>t),e})}},load:function(t,e){const{shortcuts:n,plugins:i}=e,{API:{changeContext:o,getContext:r}}=t;return function(t){const e=r(),s=i.map(t=>t.getPrefix().toUpperCase());let l=!1;Object.entries(t).forEach(([t,o])=>{t===e&&(l=!0),n[t]={},Object.entries(o).forEach(([e,o])=>{let r=e,l=e.toUpperCase().trim(),c=s.map((t,e)=>l.startsWith(t)?e:null).filter(t=>null!==t);if(c.length){let t=c[0];r=i[t].shortcutName(e)}o instanceof Function&&(o=[o]),n[t][r]=o})}),l&&(o(),o(e))}},unload:function(t,e){const{currentContext:n,shortcuts:i,ERROR_EVENT_NAME:o}=e,{ev:r}=t;return function(t){n.name!==t?i[t]?delete i[t]:r.emit(o,`Context '${t}' does not exist`):r.emit(o,`Context '${t}' can't be removed during is current active context. Change the context first`)}}};function n(t,e){const{ev:n,_specialChars:i,_readKeyEvent:o,extra:r,resetState:s}=t,{currentContext:l,streamKeys:c,listenOptions:u}=e;let a=[],d=null,p=!0,f=!1;const h=()=>p=!1,m=()=>p=!0,g=()=>f=!0,v=()=>!1===p;function x(){let t=a.map(t=>[t.join("+")]);const i={wait:h,end:m,ignore:g,isWaiting:v,note:l.note,context:l.name,dependencies:r,options:e.listenOptions,viewport:{X:window.scrollX,Y:window.scrollY,width:window.innerWidth,height:window.innerHeight},type:"key"};if(!p){let e=`KEY:${t.at(-1).join("+")}`;n.emit(e,i),f&&(a=a.slice(0,-1),f=!1)}if(p){const o=`KEY:${t.join(",")}`;n.emit(o,i),f&&(a=a.slice(0,-1),f=!1),a=[],clearTimeout(e.keyIgnore),e.keyIgnore=null,clearTimeout(d),d=null}}function E(n){if(clearTimeout(d),i().hasOwnProperty(n.code))return a.push(o(n,i)),c&&c({key:n.key,context:l.name,note:l.note,dependencies:t.extra}),e.keyIgnore?(clearTimeout(e.keyIgnore),e.keyIgnore=setTimeout(()=>e.keyIgnore=null,u.keyWait),void a.pop()):p&&a.length===e.maxSequence?(x(),void(e.keyIgnore=setTimeout(()=>e.keyIgnore=null,u.keyWait))):void(p?d=setTimeout(x,u.keyWait):x())}function O(n){if(!i().hasOwnProperty(n.code)){if(clearTimeout(d),c&&c({key:n.key,context:l.name,note:l.note,dependencies:t.extra}),e.keyIgnore)return clearTimeout(e.keyIgnore),void(e.keyIgnore=setTimeout(()=>e.keyIgnore=null,u.keyWait));if(a.push(o(n,i)),p&&a.length===e.maxSequence)return x(),void(e.keyIgnore=setTimeout(()=>e.keyIgnore=null,u.keyWait));p?d=setTimeout(x,u.keyWait):x()}}return{start:function(){e.active||(document.addEventListener("keydown",E),document.addEventListener("keypress",O),e.active=!0)},stop:function(){e.active&&(document.removeEventListener("keydown",E),document.removeEventListener("keypress",O),e.active=!1,d&&(clearTimeout(d),d=null),e.keyIgnore&&(clearTimeout(e.keyIgnore),e.keyIgnore=null),a=[],p=!0,f=!1)}}}function i(t){const e=t.toUpperCase(),n=/KEY\s*\:/i.test(e),i=e.indexOf(":");if(!n)return t;if(e.includes("SETUP"))return"KEY:SETUP";return`KEY:${e.slice(i+1).split(",").map(t=>t.trim()).map(t=>t.split("+").map(t=>t.trim()).sort().join("+")).join(",")}`}function o(t,e){let{shiftKey:n,altKey:i,ctrlKey:o}=t,r=e(),s=t.code.replace("Key","").replace("Digit",""),l=[];return o&&l.push("CTRL"),n&&l.push("SHIFT"),i&&l.push("ALT"),r.hasOwnProperty(s)?l.push(r[s].toUpperCase()):["ControlLeft","ControlRight","ShiftLeft","ShiftRight","AltLeft","AltRight","Meta"].includes(s)||l.push(s.toUpperCase()),l.sort()}function r(t,e){let n=0,i=!1;const o=e.defaultOptions,{regex:r}=t,{currentContext:{name:s},shortcuts:l}=e;return null==s?0:(Object.entries(l[s]).forEach(([s,l])=>{if(!r.test(s))return;if("KEY:SETUP"===s){i=!0;let n=l.reduce((n,i)=>{let o=i({dependencies:t.extra,defaults:structuredClone(e.defaultOptions),options:e.listenOptions});return Object.assign(n,o)},o);return void Object.assign(e.listenOptions,n)}n++;let c=s.slice(4).split(",").length;e.maxSequence<c&&(e.maxSequence=c)}),i||Object.assign(e.listenOptions,o),n)}function s(){return{ArrowLeft:"LEFT",ArrowUp:"UP",ArrowRight:"RIGHT",ArrowDown:"DOWN",Enter:"ENTER",NumpadEnter:"ENTER",Escape:"ESC",Backspace:"BACKSPACE",Space:"SPACE",Tab:"TAB",Backquote:"`",BracketLeft:"[",BracketRight:"]",Equal:"=",Slash:"/",Backslash:"\\",IntlBackslash:"`",F1:"F1",F2:"F2",F3:"F3",F4:"F4",F5:"F5",F6:"F6",F7:"F7",F8:"F8",F9:"F9",F10:"F10",F11:"F11",F12:"F12"}}function l(t,e={}){let l={_specialChars:s,_readKeyEvent:o,regex:/KEY\s*\:/i},c={active:!1,maxSequence:1,keyIgnore:null,defaultOptions:{keyWait:480},listenOptions:{keyWait:480},streamKeys:!(!e.streamKeys||"function"!=typeof e.streamKeys)&&e.streamKeys};return l.resetState=function(){c.active=!1,c.keyIgnore=null,c.maxSequence=1},t({prefix:"key",_normalizeShortcutName:i,_registerShortcutEvents:r,_listenDOM:n,pluginState:c,deps:l})}function c(t,e,n){const{listenOptions:{clickTarget:i}}=e;let o=n;if(o===document.body)return null;return i.some(t=>o.hasAttribute(t))?o:c(t,e,o.parentNode)}function u(t,e){const{ev:n,_findTarget:i,_readClickEvent:o,extra:r}=t,{listenOptions:s,currentContext:l}=e;let c=null,u=null,a=null,d=null,p=0;function f(){if(!c)return;let{left:t,top:i,width:s,height:f}=c.getBoundingClientRect(),h=window.scrollX,m=window.scrollY;const g=o(u,p),v={target:c,x:u.clientX,y:u.clientY,context:l.name,note:l.note,options:e.listenOptions,event:u,dependencies:r,viewport:{X:h,Y:m,width:window.innerWidth,height:window.innerHeight},sizes:{width:s,height:f},position:{x:t,y:i},pagePosition:{x:t+h,y:i+m},type:"click"};n.emit(g,v),a=null,d=null,c=null,u=null,p=0}function h(n){let o=e.maxLeftClicks;if(clearTimeout(a),d)return clearTimeout(d),void(d=setTimeout(()=>d=null,s.mouseWait));if(c=i(t,e,n.target),null!=c){if(c&&c.dataset.hasOwnProperty("quickClick")&&(o=1),c&&"A"===c.tagName&&(o=1),u=n,p++,p>=o)return f(),void(o>1&&(d=setTimeout(()=>d=null,s.mouseWait)));a=setTimeout(f,s.mouseWait)}}function m(n){let o=e.maxRightClicks;if(clearTimeout(a),d)return clearTimeout(d),void(d=setTimeout(()=>d=null,s.mouseWait));if(c=i(t,e,n.target),null!=c){if(c&&c.dataset.hasOwnProperty("quickClick")&&(o=1),c&&"A"===c.tagName&&(o=1),u=n,p++,p>=o)return f(),void(o>1&&(d=setTimeout(()=>d=null,s.mouseWait)));a=setTimeout(f,s.mouseWait)}}return{start:function(){e.active||(window.addEventListener("contextmenu",m),document.addEventListener("click",h),e.active=!0)},stop:function(){e.active&&(window.removeEventListener("contextmenu",m),document.removeEventListener("click",h),e.active=!1,d&&(clearTimeout(d),d=null),c=null,u=null,p=0)}}}function a(t){const e=t.toUpperCase(),n=/CLICK\s*\:/i.test(e),i=["LEFT","MIDDLE","RIGHT"],o=["ALT","SHIFT","CTRL"];let r=null,s=[],l=0,c=e.indexOf(":");return n?e.includes("SETUP")?"CLICK:SETUP":(e.slice(c+1).trim().split("-").map(t=>t.trim()).forEach(t=>{i.includes(t)?r=t:o.includes(t)?s.push(t):isNaN(t)||(l=t)}),`CLICK:${r}-${l}${s.length>0?"-":""}${s.sort().join("-")}`):t}function d(t,e){let{shiftKey:n,altKey:i,ctrlKey:o,key:r,button:s}=t,l=`CLICK:${["LEFT","MIDDLE","RIGHT"][s]}-${e}`,c=[];return o&&c.push("CTRL"),n&&c.push("SHIFT"),i&&c.push("ALT"),c.length>0?`${l}${c.length>0?"-":""}${c.sort().join("-")}`:`${l}`}function p(t,e){let n=0,i=!1;const o=e.defaultOptions,{regex:r}=t,{listenOptions:s,currentContext:{name:l},shortcuts:c}=e;return null==l||(Object.entries(c[l]).forEach(([l,c])=>{if(!r.test(l))return;if("CLICK:SETUP"===l){i=!0;let n=c.reduce((n,i)=>{let o=i({dependencies:t.extra,defaults:structuredClone(e.defaultOptions),options:s});return Object.assign(n,o)},o);return void Object.assign(e.listenOptions,n)}n++;let[u,a]=l.slice(6).split("-");"LEFT"===u&&e.maxLeftClicks<a&&(e.maxLeftClicks=a),"RIGHT"===u&&e.maxRightClicks<a&&(e.maxRightClicks=a)}),i||Object.assign(e.listenOptions,o)),n}function f(t,e={}){let n={_findTarget:c,_readClickEvent:d,regex:/CLICK\s*\:/i},i={active:!1,maxLeftClicks:1,maxRightClicks:1,defaultOptions:{mouseWait:320,clickTarget:["data-click","href"]},listenOptions:{mouseWait:320,clickTarget:["data-click","href"]},streamKeys:!(!e.streamKeys||"function"!=typeof e.streamKeys)&&e.streamKeys};return n.resetState=function(){},t({prefix:"click",_normalizeShortcutName:a,_registerShortcutEvents:p,_listenDOM:u,pluginState:i,deps:n})}function h(t,e){const{ev:n}=t;let i=null;function o(t,e,n,i){let{left:o,top:r,width:s,height:l}=n.target.getBoundingClientRect(),c=window.scrollX,u=window.scrollY;return{target:n.target,context:e.currentContext.name,note:e.currentContext.note,event:n,dependencies:t.extra,options:e.listenOptions,viewport:{X:c,Y:u,width:window.innerWidth,height:window.innerHeight},sizes:{width:s,height:l},position:{x:o,y:r},pagePosition:{x:o+c,y:r+u},type:i}}function r(i){const{callbacks:r,typeFn:s}=e;i.target;const l=o(t,e,i,"form-in"),c=`${s(l)}/in`;null!=r[c]&&n.emit(c,l,r[c])}function s(i){const{callbacks:r,typeFn:s}=e,l=o(t,e,i,"form-out"),c=`${s(l)}/out`;null!=r[c]&&n.emit(c,l,r[c])}function l(r){const{callbacks:s,typeFn:l}=e,c=o(t,e,r,"form-instant"),u=l(c),a=e.wait[`${u}`],d=`${u}/instant`;if(null==s[d])return;if(0===a)return void n.emit(d,c,s[d]);clearTimeout(i),i=setTimeout(()=>n.emit(d,c,s[d]),a)}return{start:function(){e.active||(document.addEventListener("focusin",r),document.addEventListener("focusout",s),document.addEventListener("input",l),e.active=!0)},stop:function(){e.active&&(document.removeEventListener("focusin",r),document.removeEventListener("focusout",s),document.removeEventListener("input",l),e.active=!1,i&&(clearTimeout(i),i=null))}}}function m(t){const e=t.toUpperCase(),n=/FORM\s*\:/i.test(e),i=e.indexOf(":");if(!n)return t;return`FORM:${e.slice(i+1).trim()}`}function g(t,e){const{regex:n,_defaults:i,ev:o}=t,{currentContext:{name:r,note:s},shortcuts:l,callbacks:c,ERROR_EVENT_NAME:u,defaultOptions:a}=e;let d=[],p=[],f=[],h=0;if(null==r)return!1;if(Object.entries(l[r]).forEach(([i,o])=>{if(n.test(i)){if(i.includes("SETUP")){let n=o.reduce((n,i)=>{let o=i({dependencies:t.extra,defaults:structuredClone(e.defaultOptions),options:e.listenOptions});return Object.assign(n,o)},a);return void Object.assign(e.listenOptions,n)}"FORM:WATCH"===i&&(d=o),"FORM:DEFINE"===i&&(p=o),"FORM:ACTION"===i&&(f=o)}}),0===f.length)return h;let m=new Set;0===p.length&&(p=[i.define]),0===d.length&&(d=[i.watch]);let g=d.map(n=>n({dependencies:t.extra,context:r,note:s,options:e.listenOptions})).reduce((t,e)=>(t.push(e),t),[]);return e.watchList=document.querySelectorAll(g),e.watchList.forEach(n=>{let{left:i,top:o,width:l,height:c}=n.getBoundingClientRect(),u=window.scrollX,a=window.scrollY;return m.add(p[0]({target:n,context:r,note:s,dependencies:t.extra,options:e.listenOptions,viewport:{X:u,Y:a,width:window.innerWidth,height:window.innerHeight},sizes:{width:l,height:c},position:{x:i,y:o},pagePosition:{x:i+u,y:o+a}}))}),e.typeFn=p[0]?p[0]:i.define,f.forEach(n=>{if(!(n instanceof Function))return o.emit(u,"The 'form:action' should be a function."),!1;let i=n({dependencies:t.extra,options:e.listenOptions});if(!(i instanceof Array))return o.emit(u,"Warning: The 'form:action' function should RETURN an array."),!1;i.forEach(({fn:t,type:n,timing:i,wait:r=0})=>{if(m.has(n)&&t instanceof Function){let e=`${n}/${i}`;const r=c.hasOwnProperty(e);r?c[e].push(t):c[e]=[t],r||o.on(e,(t,e)=>{e.forEach(e=>{e instanceof Function&&e(t)})})}"instant"===i&&(e.wait[`${n}`]=r)})}),h=Object.keys(e.callbacks).length,h}const v={watch:()=>"input, select, textarea, button, a",define:({target:t})=>"checkbox"===t.type||"radio"===t.type?"checkbox":"button"==t.type||"submit"==t.type?"button":"input"};function x(t,e={}){let n={_defaults:v,regex:/FORM\s*\:/i},i={callbacks:{},typeFn:"",watchList:[],wait:{},defaultOptions:{},listenOptions:{}};return n.resetState=function(){i.callbacks={},i.typeFn="",i.watchList=[],i.wait={}},t({prefix:"form",_normalizeShortcutName:m,_registerShortcutEvents:g,_listenDOM:h,pluginState:i,deps:n})}function E(t,e,n){const{listenOptions:{hoverTarget:i}}=e;let o=n;if(o===document.body)return!1;if(o===document)return!1;return i.some(t=>o.hasAttribute(t))?o:E(t,e,o.parentNode)}function O(t,e){const{ev:n,_findTarget:i,resetState:o,extra:r}=t;function s(o){const s=o.clientX,l=o.clientY;let{hovered:c,hoverRectangle:u,listenOptions:a,hoverTimer:d,leaveTimer:p,lastEvent:f,lastHoverTarget:h}=e,m=i(t,e,o.target);if(!function(t,e,n){return!!t&&e>=t.left&&e<=t.right&&n>=t.top&&n<=t.bottom}(u,s,l)&&m!==c){if(c&&!m){if(e.hovered=!1,e.hoverRectangle=null,d&&(clearTimeout(d),e.hoverTimer=null),"off"===f)return;return void(e.leaveTimer=setTimeout(()=>{n.emit("HOVER:OFF",g(c)),e.leaveTimer=null,e.lastEvent="off"},a.wait))}c&&(n.emit("HOVER:OFF",g(c)),e.leaveTimer=null,e.lastEvent="off"),clearTimeout(p),clearTimeout(d),e.hovered=m,e.hoverRectangle=m.getBoundingClientRect(),e.hoverTimer=setTimeout(()=>{n.emit("HOVER:ON",g(m)),e.hoverTimer=null,e.lastHoverTarget=m,e.lastEvent="on"},a.wait)}function g(t){let{left:n,top:i,width:s,height:l}=t.getBoundingClientRect(),c=window.scrollX,u=window.scrollY;return{target:t,context:e.currentContext.name,note:e.currentContext.note,event:o,dependencies:r,options:e.listenOptions,viewport:{X:c,Y:u,width:window.innerWidth,height:window.innerHeight},sizes:{width:s,height:l},position:{x:n,y:i},pagePosition:{x:n+c,y:i+u},type:"hover"}}}return{start:function(){e.active||(document.addEventListener("mousemove",s),e.active=!0)},stop:function(){e.active&&(document.removeEventListener("mousemove",s),o())}}}function y(t){const e=t.toUpperCase(),n=/HOVER\s*\:/i.test(e);let i=e.indexOf(":");return n?`HOVER:${e.slice(i+1).trim()}`:t}function w(t,e){let n=0,i=!1;const o=e.defaultOptions,{regex:r,_defaults:s,ev:l}=t,{currentContext:{name:c},shortcuts:u,ERROR_EVENT_NAME:a}=e;return null==c||(Object.entries(u[c]).forEach(([s,l])=>{if(r.test(s)){if("HOVER:SETUP"===s){i=!0;let n=l.reduce((n,i)=>{let o=i({dependencies:t.extra,defaults:structuredClone(e.defaultOptions),options:e.listenOptions});return Object.assign(n,o)},o);return void Object.assign(e.listenOptions,n)}n++}}),i||Object.assign(e.listenOptions,o)),n}function T(t,e={}){let n={_findTarget:E,regex:/HOVER\s*\:/i},i={active:!1,hovered:!1,hoverRectangle:null,hoverTimer:null,leaveTimer:null,lastEvent:"",lastHoverTarget:null,defaultOptions:{hoverTarget:["data-hover"],wait:320},listenOptions:{hoverTarget:["data-hover"],wait:320}};return n.resetState=function(){i.active=!1,i.hovered=!1,i.hoverRectangle=null,clearTimeout(i.hoverTimer),clearTimeout(i.leaveTimer),i.hoverTimer=null,i.leaveTimer=null,i.lastHoverTarget=null},t({prefix:"hover",_normalizeShortcutName:y,_registerShortcutEvents:w,_listenDOM:O,pluginState:i,deps:n})}function C(t,e){const{ev:n,resetState:i,extra:o}=t;let r=null,s=null;function l(t){t.clientX,t.clientY;const{lastPosition:i,lastDirection:l,listenOptions:c,currentContext:u}=e,{scrollWait:a,endScrollWait:d,minSpace:p}=c;if(!i)return;let f=null,h=window.scrollX,m=window.scrollY,g=Math.abs(m-i.y),v=Math.abs(h-i.x);if(g<p&&v<p)return;const x=[];g>=p&&(m>i.y?x.push("down"):x.push("up")),v>=p&&(h>i.x?x.push("right"):x.push("left")),f=x[0]||null;const E=t=>({x:h,y:m,direction:t,context:u.name,note:u.note,dependencies:o,options:e.listenOptions,viewport:{X:h,Y:m,width:window.innerWidth,height:window.innerHeight},type:"scroll"});x.forEach(t=>{const e=`SCROLL:${t.toUpperCase()}`;n.emit(e,E(t))}),clearTimeout(r),clearTimeout(s);const O=x[x.length-1]||null;r=setTimeout(()=>{},a),s=setTimeout(()=>n.emit("SCROLL:END",E(O)),d),e.lastPosition={x:h,y:m},e.lastDirection=f}return{start:function(){e.active||(e.lastPosition={x:window.scrollX,y:window.scrollY},window.addEventListener("scroll",l),e.active=!0)},stop:function(){e.active&&(window.removeEventListener("scroll",l),i())}}}function S(t){const e=t.toUpperCase(),n=/SCROLL\s*\:/i.test(e);let i=e.indexOf(":");return n?`SCROLL:${e.slice(i+1).trim()}`:t}function k(t,e){let n=0,i=!1;const o=e.defaultOptions,{regex:r}=t,{currentContext:{name:s},shortcuts:l}=e;return null==s||(Object.entries(l[s]).forEach(([s,l])=>{if(r.test(s)){if("SCROLL:SETUP"===s){i=!0;let n=l.reduce((n,i)=>{let o=i({dependencies:t.extra,defaults:structuredClone(e.defaultOptions),options:e.listenOptions});return Object.assign(n,o)},o);return void Object.assign(e.listenOptions,n)}n++}}),i||Object.assign(e.listenOptions,o)),n}function R(t,e={}){let n={regex:/SCROLL\s*\:/i},i={active:!1,lastPosition:null,lastDirection:null,defaultOptions:{scrollWait:50,endScrollWait:400,minSpace:40},listenOptions:{scrollWait:50,endScrollWait:400,minSpace:40}};return n.resetState=function(){i.active=!1},t({prefix:"scroll",_normalizeShortcutName:S,_registerShortcutEvents:k,_listenDOM:C,pluginState:i,deps:n})}function L(n={}){let i={},o={};const r=t(),s={currentContext:{name:null,note:null},shortcuts:{},plugins:[],exposeShortcut:!(!n.onShortcut||"function"!=typeof n.onShortcut)&&n.onShortcut,ERROR_EVENT_NAME:n.errorEventName?n.errorEventName:"@shortcuts-error"};let l={ev:r,inAPI:i,API:o,extra:{}};return o.enablePlugin=(t,e={})=>{if("function"!=typeof t)return;let n=t(i._setupPlugin,e);const o=n.getPrefix(),r=i._systemAction(o,"none");-1===r?(s.plugins.push(n),n.unmute()):(n.destroy(),s.plugins[r].unmute())},o.disablePlugin=t=>{const e=i._systemAction(t,"destroy");-1!==e&&s.plugins.splice(e,1)},o.mutePlugin=t=>i._systemAction(t,"mute"),o.unmutePlugin=t=>i._systemAction(t,"unmute"),o.listPlugins=()=>s.plugins.map(t=>t.getPrefix()),o.getContext=()=>s.currentContext.name,o.getNote=()=>s.currentContext.note,o.setNote=(t=null)=>{"string"!=typeof t&&null!=t||(s.currentContext.note=t)},o.pause=(t="*")=>{let e=i._readShortcutWithPlugins(t);r.stop(e)},o.resume=(t="*")=>{const e=i._readShortcutWithPlugins(t);r.start(e)},o.emit=(t,...e)=>r.emit(i._readShortcutWithPlugins(t),...e),o.listContexts=()=>Object.keys(s.shortcuts),o.setDependencies=t=>Object.assign(l.extra,t),o.getDependencies=()=>l.extra,o.reset=function(){r.reset(),o.changeContext(),s.plugins.forEach(t=>t.destroy()),o.listContexts().map(t=>o.unload(t)),l.extra={},s.exposeShortcut=null},Object.entries(e).forEach(([t,e])=>{t.startsWith("_")?i[t]=e(l,s):o[t]=e(l,s)}),o}export{f as pluginClick,x as pluginForm,T as pluginHover,l as pluginKey,R as pluginScroll,L as shortcuts};
